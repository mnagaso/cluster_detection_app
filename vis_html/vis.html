<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Vis</title>

    <style type="text/css">
      html, body {
        font: 10pt arial;
        padding: 0;
        margin: 0;
        width: 100%;
        height: 100%;
      }

      #mynetwork {
        width: 100%;
        height: 100%;
      }
    </style>

    <link href="vis.min.css" rel="stylesheet" type="text/css">
    <link href="vis.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="vis.min.js"></script>
    <script type="text/javascript">
      var nodes = null;
      var edges = null;
      var network = null;

      var LENGTH_MAIN = 350,
          LENGTH_SERVER = 150,
          LENGTH_SUB = 50,
          WIDTH_SCALE = 2,
          GREEN = 'green',
          RED = '#C5000B',
          ORANGE = 'orange',
      //GRAY = '#666666',
          GRAY = 'gray',
          BLACK = '#2B1B17';

      var options = {
        nodes: {
          scaling: {
            min: 160,
            max: 320
          }
        },
        edges: {
          color: GRAY,
          smooth: true
        },
        physics:{
          barnesHut:{gravitationalConstant:-30000},
          stabilization: {iterations:2500}
        },
        groups: {
          1: {
            shape: 'triangle',
            color: '#FF9900' // orange
          },
          2: {
            shape: 'dot',
            color: "#2B7CE9" // blue
          },
          3: {
            shape: 'square',
            color: "#5A1E5C" // purple
          },
          4: {
            shape: 'square',
            color: "#C5000B" // red
          },
          5: {
            shape: 'square',
            color: "#109618" // green
          }
        }
      };

      function readTextFile(file, callback) {
        var rawFile = new XMLHttpRequest();
        rawFile.overrideMimeType("application/json");
        rawFile.open("GET", file, true);
        var isFinished = false;
        rawFile.onreadystatechange = function() {
          if(isFinished){
            return;
          }

          if(rawFile.readyState == 4){
            callback(rawFile.responseText);
            isFinished = true;
          }
        }
        rawFile.send(null);
      }

      function readJson(filename, container_name){
        readTextFile(filename, function(text){
          var gephijson = JSON.parse(text);
          var parseroptions = {
            edges: {
              inheritcolors: true
            },
            nodes: {
              fixed: false,
              parsecolor: false 
            }
          }
          var parsed = vis.network.convertGephi(gephijson, parseroptions);
          
          for(var i = 0; i < parsed.nodes.length; i++){
            parsed.nodes[i].group = parsed.nodes[i].attributes.Module_id;
            parsed.nodes[i].size = 32;
            delete parsed.nodes[i].color 
            console.log(parsed.nodes[i]);
          }

          var   data = {
            nodes: parsed.nodes,
            edges: parsed.edges
          };
          var container = document.getElementById(container_name);
          network = new vis.Network(container, data, options);
        });
      }

      

      // Called when the Visualization API is loaded.
      function draw() {
        // create a network
        readJson("result_mapequation.json", "mapequation_network");
        readJson("result_modularity.json", "modularity_network");
      }
    </script>
    <style id="style-1-cropbar-clipper">/* Copyright 2014 Evernote Corporation. All rights reserved. */
      .en-markup-crop-options {
          top: 18px !important;
          left: 50% !important;
          margin-left: -100px !important;
          width: 200px !important;
          border: 2px rgba(255,255,255,.38) solid !important;
          border-radius: 4px !important;
      }
      
      .en-markup-crop-options div div:first-of-type {
          margin-left: 0px !important;
      }
    </style>
  </head>

  <body onload="draw()">
    <div class="network">
      <h1>Mapequation Network</h1>
      <div id="mapequation_network">
        <div class="vis-network" tabindex="900" >
          <canvas width="50%" height="1116"></canvas>
        </div>
      </div>
    </div>
    <div class="network">
      <h1>Modularity Network</h1>
      <div id="modularity_network">
        <div class="vis-network" tabindex="900" >
          <canvas width="50%" height="1116"></canvas>
        </div>
      </div>
    </div>
  </body>
  <div>
  </div>
</html>
